
# CI/CD 및 GitOps 기반 배포 자동화 기술서

## 1. CI(Continuous Integration, 지속적 통합)란?

### 개념

* 개발자가 작성한 코드를 자주 Git 저장소에 병합(커밋/푸쉬)하며,
* 자동으로 빌드 및 테스트를 수행해 코드 품질을 검증하는 과정입니다.

### 수동 테스트와 CI의 차이

| 구분          | 수동 테스트                 | CI(자동화)              |
|-------------|------------------------|----------------------|
| 실행 시점       | 개발자가 직접 로컬에서 실행        | 코드 커밋/푸쉬 시마다 자동 실행   |
| 테스트 빈도      | 필요할 때만 불규칙적으로 수행       | 모든 코드 변경 시마다 반복 수행   |
| 오류 발견 시점    | 늦을 수 있음, 배포 후 발견 가능    | 즉시 알림, 빠른 문제 대응 가능   |
| 협업 문제       | 코드 충돌 및 버그가 누적될 가능성 존재 | 충돌 조기 발견 및 통합 지원     |
| 개발 효율성 및 품질 | 편차 큼, 누락 가능            | 일관된 품질 유지, 반복 작업 자동화 |

### 왜 CI가 중요한가?

* **개발자가 직접 테스트하는 것만으로는 부족**
  개인 개발 환경에서 테스트하더라도 다른 팀원이 동시에 작업하면 충돌 가능성이 있고, 모든 경우의 수를 체크하기 어렵기 때문입니다.

* **CI가 자동으로 검증해 줌으로써**
  코드 품질이 떨어진 상태로 배포되는 위험을 줄이고, 개발자에게 빠른 피드백을 줍니다.

### 비유

* CI는 ‘요리 준비(재료 손질, 조리)’ 단계에 해당하며,
* 수동 테스트는 주방에서 요리사가 맛을 보는 과정과 같습니다.
* 하지만 CI는 주방 전체의 품질 관리 시스템 역할을 하죠.

---

## 2. CD(Continuous Delivery/Deployment, 지속적 배포)란?

### 개념

* CI로 빌드·테스트가 완료된 코드를
* 실제 운영 환경(또는 스테이징 환경)에 자동으로 배포하는 과정입니다.

### CD 도구의 역할

* 배포 설정을 쿠버네티스 클러스터 등에 적용해 서비스 상태를 최신으로 유지
* 배포 실패 시 자동 롤백 등 복구 기능 제공
* 여러 환경(개발, 테스트, 운영)에 대한 배포 자동화

---

## 3. GitOps란?

### 개념

* 배포와 운영 환경을 Git 저장소에 선언적으로 관리하는 방식
* Git을 단일 진실 소스(Single Source of Truth)로 사용해,
* Git에 저장된 상태와 실제 클러스터 상태를 자동으로 동기화하여 일관된 운영 보장

### 특징

* 코드 변경 → Git 푸쉬 → 자동 배포 및 상태 관리
* 운영 환경과 배포 상태를 Git으로 추적 가능
* 자동화와 안정성 강화

---

## 4. Argo CD란?

### 개요

* GitOps 방식의 **CD(지속적 배포) 도구**
* Git 저장소에 정의된 쿠버네티스 배포 설정을 클러스터에 자동으로 동기화
* 배포 상태 모니터링, 자동 롤백, 멀티 클러스터 지원 등 제공

### 왜 Argo CD는 CI가 아닌가?

| 구분     | Argo CD의 역할              | CI 도구(예: Jenkins) 역할 |
|--------|--------------------------|----------------------|
| 기능     | Git에 저장된 배포 설정을 클러스터에 적용 | 코드 빌드, 테스트, 품질 검증 수행 |
| 실행 시점  | 배포 시점                    | 코드 변경 시점             |
| 테스트 기능 | 없음                       | 자동 빌드 및 테스트 지원       |

### Argo CD의 특징

| 특징         | 설명                                    |
|------------|---------------------------------------|
| GitOps 기반  | Git 저장소와 클러스터 상태 자동 동기화               |
| 상태 관리 및 복구 | 클러스터 상태 불일치 시 자동 복구 및 롤백              |
| 사용자 UI 제공  | 배포 현황 모니터링 및 수동 조작 가능                 |
| 멀티 클러스터 지원 | 여러 쿠버네티스 클러스터 동시 관리 가능                |
| 무료 오픈소스    | 도구 자체는 무료, 운영 인프라(서버, 클라우드) 비용은 별도 발생 |

### 비유

* Argo CD는 ‘완성된 요리를 손님에게 서빙하는 역할’을 하는 도구입니다.
* 직접 요리를 준비하는(CI) 도구는 아니지만, 준비된 요리를 빠르고 안정적으로 전달합니다.

---

## 5. Jenkins란?

### 개요

* 대표적인 CI(지속적 통합) 도구
* 코드 빌드, 테스트, 배포 자동화를 지원하는 서버 기반 툴
* 다양한 플러그인으로 유연한 커스터마이징 가능

### Jenkins가 왜 GitOps에 부적합하다고도 하나?

* Jenkins는 주로 **CI 파이프라인에 초점**을 맞추고 있음
* GitOps가 요구하는 **클러스터 상태 동기화, 지속적 배포 자동화** 기능은 상대적으로 부족
* 대신 Jenkins + Argo CD 조합으로 CI와 CD 역할을 분리하는 경우가 많음

### Jenkins 사용 예시

* 개발자가 코드 푸쉬 → Jenkins가 자동 빌드 및 테스트 수행 → 빌드 성공 시 Argo CD가 자동 배포 수행

---

## 6. CI/CD를 활용한 실제 배포 흐름 예시

1. **로컬 개발 및 테스트**

    * 개발자가 로컬 환경에서 기능 구현 후 테스트
2. **Git에 코드 커밋 및 푸쉬**

    * 변경 사항을 원격 저장소에 업로드
3. **CI 파이프라인 자동 실행**

    * Jenkins가 코드를 자동으로 빌드, 테스트 수행
    * 실패 시 개발자에게 알림
4. **CD 파이프라인 자동 실행**

    * Argo CD가 Git 저장소 상태를 감시
    * 변경 사항이 감지되면 자동으로 쿠버네티스 클러스터에 배포
    * 배포 상태 모니터링 및 이상 시 롤백 처리
5. **서비스 운영 및 모니터링**

    * 사용자가 웹 브라우저 등으로 서비스 이용
    * 운영 중 장애 발생 시 자동 복구 또는 관리자 알림

---

## 7. 배포 및 운영 시 비용 이슈

* Argo CD, Jenkins 등 도구는 **오픈소스 무료**이지만,
* **이들을 설치·운영하는 서버, 쿠버네티스 클러스터, 네트워크 인프라** 비용은 별도 발생
* 개발 초기에는 개인 PC 또는 저렴한 클라우드로 시작 가능
* 서비스가 커지면 클라우드 비용 증가하므로 비용 최적화 전략 필요

---

# 결론

| 항목          | 요약                                                 |
|-------------|----------------------------------------------------|
| **CI**      | 개발 코드 자동 빌드·테스트로 품질 보증, 필수적 자동화 단계                 |
| **CD**      | 검증된 코드를 자동 배포 및 운영 환경과 동기화, 안정적 서비스 운영 지원          |
| **GitOps**  | Git을 단일 진실 소스로 삼아 배포·운영 환경 상태 자동 관리                |
| **Argo CD** | GitOps 기반 CD 도구로 자동 배포 및 상태 관리, 무료지만 운영 인프라 비용은 있음 |
| **Jenkins** | 대표 CI 도구, 빌드·테스트 자동화 담당, CD 기능은 제한적                |

---
